(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{117:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(18),c=n.n(r),i=n(9),o=n(38),l=n(106),u=n(17),j=(n(117),n(5)),d=n(239),b=n(1),h=function(e){var t=e.user,n=e.logout;return Object(b.jsxs)("div",{children:["Email:",t.email,Object(b.jsx)("br",{}),"Token:",t.token.substring(1,50),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){return n()},children:"Log out"})]})},m="AUTH_LOGIN",O="AUTH_LOGOUT",p=function(e){return{type:m,user:e}},x=function(){var e=Object(j.g)(),t=Object(i.c)((function(e){return e.auth})),n=Object(i.b)();return Object(b.jsx)(h,{user:t.currentUser,logout:function(){localStorage.removeItem("token"),n({type:O}),e("/login")}})},f=function(){return Object(b.jsx)(x,{})},g=n(15),v=n.n(g),w=n(26),y=n(7),S=n(240),k=n(102),C=n(244),I=n(245),T=n(103),F=n(246),N=n(19),L=n(52),P=N.a().shape({email:N.c().email("Invalid email address").required("Please input email address"),password:N.c().min(5,"Must be more than 5 characters").required("Please input password")}),U=function(e){var t=e.email,n=e.password,a=e.setEmail,s=e.setPassword,r=e.onLogin;return Object(b.jsx)(d.a,{children:Object(b.jsxs)(S.a,{children:[Object(b.jsx)(k.a,{xs:0,sm:2,md:3,lg:4}),Object(b.jsx)(k.a,{xs:12,sm:8,md:6,lg:4,children:Object(b.jsx)(L.a,{validationSchema:P,onSubmit:function(e){return r()},initialValues:{email:t,password:n},children:function(e){var t=e.handleSubmit,n=e.handleChange,r=e.handleBlur,c=e.values,i=e.touched,o=e.errors;return Object(b.jsxs)(C.a,{noValidate:!0,onSubmit:t,children:[Object(b.jsx)("h1",{className:"text-center",children:"Log In"}),Object(b.jsx)(C.a.Label,{htmlFor:"basic-url",children:"Email"}),Object(b.jsxs)(I.a,{className:"mb-3",children:[Object(b.jsx)(T.a,{name:"email",value:c.email,onChange:function(e){n(e),a(e.target.value)},isInvalid:!!i&&!!o.email,onBlur:r}),Object(b.jsx)(C.a.Control.Feedback,{type:"invalid",children:o.email})]}),Object(b.jsx)(C.a.Label,{htmlFor:"basic-url",children:"Password"}),Object(b.jsxs)(I.a,{className:"mb-3",children:[Object(b.jsx)(T.a,{type:"password",name:"password",value:c.password,onChange:function(e){n(e),s(e.target.value)},isInvalid:i.password&&!!o.password,onBlur:r}),Object(b.jsx)(C.a.Control.Feedback,{type:"invalid",children:o.password})]}),Object(b.jsx)("div",{className:"d-grid gap-2 mb-3",children:Object(b.jsx)(F.a,{variant:"primary",type:"submit",children:"Log In"})}),Object(b.jsxs)("div",{className:"text-center",children:["Don't you have an account? \xa0",Object(b.jsx)(u.b,{to:"/signup",children:"Create account"})]})]})}})})]})})},E=n(53),A=n.n(E),B="http://localhost:5000/api",_={headers:{Authorization:localStorage.getItem("token")}},q={auth:{login:function(e,t){return A.a.post("".concat(B,"/auth/login"),{email:e,password:t})},register:function(e,t){return A.a.post("".concat(B,"/auth/register"),{email:e,password:t})},me:function(){return A.a.get("".concat(B,"/auth/me"),_)}}},H="START_ACTION",D="END_ACTION",V="SHOW_TOAST",M="HIDE_TOAST",W=function(){return{type:H}},z=function(){return{type:D}},G=function(e,t){return{type:V,title:e,content:t}},J=function(){var e=Object(j.g)(),t=Object(i.b)(),n=Object(a.useState)(""),s=Object(y.a)(n,2),r=s[0],c=s[1],o=Object(a.useState)(""),l=Object(y.a)(o,2),u=l[0],d=l[1],h=function(){var n=Object(w.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(W()),n.prev=1,n.next=4,q.auth.login(r,u);case 4:a=n.sent,t(z()),localStorage.setItem("token",a.data.token),t(G("Login Success","Welcome")),t(p(a.data)),e("/"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),401===n.t0.response.status&&(t(z()),t(G("Login Failed",n.t0.response.data.error)));case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(){return n.apply(this,arguments)}}();return Object(b.jsx)(U,{email:r,password:u,setEmail:c,setPassword:d,onLogin:h})},R=function(){return Object(b.jsx)(J,{})},K=N.a().shape({email:N.c().email("Invalid email address").required("Please input email address"),password:N.c().min(5,"Must be more than 5 characters").required("Please input password"),passconf:N.c().required("Please input confirm password").oneOf([N.b("password")],"Confirm Password should be the same as password")}),Q=function(e){var t=e.email,n=e.password,a=e.passconf,s=e.setEmail,r=e.setPassword,c=e.setPassconf,i=e.onSignup;return Object(b.jsx)(d.a,{children:Object(b.jsxs)(S.a,{children:[Object(b.jsx)(k.a,{xs:0,sm:2,md:3,lg:4}),Object(b.jsx)(k.a,{xs:12,sm:8,md:6,lg:4,children:Object(b.jsx)(L.a,{validationSchema:K,onSubmit:function(e){return i()},initialValues:{email:t,password:n,passconf:a},children:function(e){var t=e.handleSubmit,n=e.handleChange,a=e.handleBlur,i=e.values,o=e.touched,l=e.errors;return Object(b.jsxs)(C.a,{noValidate:!0,onSubmit:t,children:[Object(b.jsx)("h1",{className:"text-center",children:"Sign Up"}),Object(b.jsx)(C.a.Label,{htmlFor:"basic-url",children:"Email"}),Object(b.jsxs)(I.a,{className:"mb-3",children:[Object(b.jsx)(T.a,{name:"email",value:i.email,onChange:function(e){n(e),s(e.target.value)},isInvalid:!!o&&!!l.email,onBlur:a}),Object(b.jsx)(C.a.Control.Feedback,{type:"invalid",children:l.email})]}),Object(b.jsx)(C.a.Label,{htmlFor:"basic-url",children:"Password"}),Object(b.jsxs)(I.a,{className:"mb-3",children:[Object(b.jsx)(T.a,{type:"password",name:"password",value:i.password,onChange:function(e){n(e),r(e.target.value)},isInvalid:o.password&&!!l.password,onBlur:a}),Object(b.jsx)(C.a.Control.Feedback,{type:"invalid",children:l.password})]}),Object(b.jsx)(C.a.Label,{htmlFor:"basic-url",children:"Confirm Password"}),Object(b.jsxs)(I.a,{className:"mb-3",children:[Object(b.jsx)(T.a,{type:"password",name:"passconf",value:i.passconf,onChange:function(e){n(e),c(e.target.value)},isInvalid:o.passconf&&!!l.passconf,onBlur:a}),Object(b.jsx)(C.a.Control.Feedback,{type:"invalid",children:l.passconf})]}),Object(b.jsx)("div",{className:"d-grid gap-2 mb-3",children:Object(b.jsx)(F.a,{type:"submit",variant:"primary",children:"Sign Up"})}),Object(b.jsxs)("div",{className:"text-center",children:["Already have an account?\xa0",Object(b.jsx)(u.b,{to:"/login",children:"Log In"})]})]})}})})]})})},X=function(){var e=Object(j.g)(),t=Object(i.b)(),n=Object(a.useState)(""),s=Object(y.a)(n,2),r=s[0],c=s[1],o=Object(a.useState)(""),l=Object(y.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(""),m=Object(y.a)(h,2),O=m[0],p=m[1],x=function(){var n=Object(w.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(W()),n.prev=1,n.next=4,q.auth.register(r,u);case 4:t(z()),t(G("Signup Success","Welcome")),e("/login"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),401===n.t0.response.status&&(t(z()),t(G("Signup Failed",n.t0.response.data.error)));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(){return n.apply(this,arguments)}}();return Object(b.jsx)(Q,{email:r,password:u,passconf:O,setEmail:c,setPassword:d,setPassconf:p,onSignup:x})},Y=function(){return Object(b.jsx)(X,{})},Z=n(241),$=function(){return Object(b.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",backgroundColor:"#ffffff",opacity:"0.5",zIndex:"10000"},children:Object(b.jsx)(Z.a,{animation:"border",variant:"primary",style:{width:"50px",height:"50px",position:"fixed",top:"calc(50% - 50px)",left:"calc(50% - 50px)"}})})},ee=function(){return Object(i.c)((function(e){return e.common})).loading&&Object(b.jsx)($,{})},te=n(242),ne=n(243),ae=function(e){var t=e.title,n=e.content,a=e.hideToast;return Object(b.jsx)(te.a,{position:"top-end",className:"p-3",children:Object(b.jsxs)(ne.a,{onClose:function(){return a()},delay:3e3,autohide:!0,children:[Object(b.jsxs)(ne.a.Header,{children:[Object(b.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(b.jsx)("strong",{className:"me-auto",children:t}),Object(b.jsx)("small",{className:"text-muted",children:"just now"})]}),Object(b.jsx)(ne.a.Body,{children:n})]})})},se=function(){var e=Object(i.c)((function(e){return e.common})),t=Object(i.b)(),n=e.showToast,a=e.msgTitle,s=e.msgContent;return n?Object(b.jsx)(ae,{title:a,content:s,hideToast:function(){t({type:M})}}):""},re=function(e){var t=Object(i.b)(),n=Object(j.g)(),r=localStorage.getItem("token"),c=Object(i.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.currentUser.email){e.next=11;break}return e.prev=1,e.next=4,q.auth.me();case 4:a=e.sent,t(p(a.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),401===e.t0.response.status&&(localStorage.removeItem("token"),n("/login"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.currentUser.email?Object(b.jsx)(s.a.Fragment,{children:e.children}):r?Object(b.jsx)($,{}):Object(b.jsx)(j.a,{to:"/login"})},ce=function(e){var t=Object(i.b)(),n=Object(a.useState)(localStorage.getItem("token")),r=Object(y.a)(n,2),c=r[0],o=r[1],l=Object(i.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.currentUser.email){e.next=11;break}return e.prev=1,e.next=4,q.auth.me();case 4:n=e.sent,t(p(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),401===e.t0.response.status&&(localStorage.removeItem("token"),o(""));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l.currentUser.email?Object(b.jsx)(j.a,{to:"/"}):c?Object(b.jsx)($,{}):Object(b.jsx)(s.a.Fragment,{children:e.children})};n(236);var ie=function(){return Object(b.jsxs)(d.a,{className:"App",children:[Object(b.jsxs)(j.d,{children:[Object(b.jsx)(j.b,{path:"/",element:Object(b.jsx)(s.a.Fragment,{children:Object(b.jsx)(re,{children:Object(b.jsx)(f,{})})})}),Object(b.jsx)(j.b,{path:"/login",element:Object(b.jsx)(s.a.Fragment,{children:Object(b.jsx)(ce,{children:Object(b.jsx)(R,{})})})}),Object(b.jsx)(j.b,{path:"/signup",element:Object(b.jsx)(s.a.Fragment,{children:Object(b.jsx)(ce,{children:Object(b.jsx)(Y,{})})})})]}),Object(b.jsx)(ee,{}),Object(b.jsx)(se,{})]})},oe=n(2),le={currentUser:{email:"",token:""}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(oe.a)(Object(oe.a)({},e),{},{currentUser:t.user});case O:return Object(oe.a)(Object(oe.a)({},e),{},{currentUser:{email:"",token:""}});default:return e}},je={loading:!1,showToast:!1,msgTitle:"",msgContent:""},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(oe.a)(Object(oe.a)({},e),{},{loading:!0});case D:return Object(oe.a)(Object(oe.a)({},e),{},{loading:!1});case V:return Object(oe.a)(Object(oe.a)({},e),{},{showToast:!0,msgTitle:t.title,msgContent:t.content});case M:return Object(oe.a)(Object(oe.a)({},e),{},{showToast:!1});default:return e}},be=Object(o.b)({auth:ue,common:de}),he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))},me=Object(o.a)(l.a)(o.c)(be);c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(i.a,{store:me,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(ie,{})})})}),document.getElementById("root")),he()}},[[237,1,2]]]);
//# sourceMappingURL=main.1e097a17.chunk.js.map